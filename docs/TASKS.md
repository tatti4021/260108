# 財務モデリングシステム 開発タスク一覧

## 概要
このドキュメントは財務モデリングシステムの開発タスクを整理したものです。
優先度と依存関係を考慮して、フェーズごとに分類しています。

---

## Phase 1: 基盤構築（必須機能）

### 1.1 プロジェクトセットアップ
- [ ] **TASK-001**: プロジェクト構造の作成
  - `/src` - ソースコード
  - `/src/css` - スタイルシート
  - `/src/js` - JavaScript
  - `/src/js/models` - データモデル
  - `/src/js/views` - 画面表示
  - `/src/js/utils` - ユーティリティ
  - `/assets` - 画像等のリソース

- [ ] **TASK-002**: 基本HTMLテンプレートの作成
  - ヘッダー、サイドバー、メインエリア、フッターのレイアウト
  - レスポンシブ対応の基本設定

- [ ] **TASK-003**: CSSフレームワークの構築
  - CSS変数（カラーパレット、フォント等）の定義
  - 共通コンポーネントスタイル（ボタン、フォーム、テーブル等）
  - ダークモード対応（オプション）

- [ ] **TASK-004**: JavaScriptモジュール構造の設計
  - ES6モジュールの設定
  - イベント管理の基盤
  - ルーティング（SPA風のページ切り替え）

### 1.2 データ管理基盤
- [ ] **TASK-005**: データモデルの実装
  - 会社情報モデル
  - 期間データモデル
  - P/L、B/S、C/Fの構造定義

- [ ] **TASK-006**: LocalStorageマネージャーの実装
  - データの保存・読込
  - バージョン管理（マイグレーション対応）
  - エラーハンドリング

- [ ] **TASK-007**: 状態管理の実装
  - アプリケーション状態の管理
  - 変更検知・自動保存

---

## Phase 2: 財務三表の実装

### 2.1 損益計算書 (P/L)
- [ ] **TASK-008**: P/L入力フォームの作成
  - 売上高入力フィールド
  - 売上原価入力（金額 or 原価率）
  - 販管費カテゴリ別入力
  - 営業外収益・費用入力

- [ ] **TASK-009**: P/L計算ロジックの実装
  - 売上総利益 = 売上高 - 売上原価
  - 営業利益 = 売上総利益 - 販管費
  - 経常利益 = 営業利益 + 営業外収益 - 営業外費用
  - 当期純利益 = 経常利益 - 法人税等

- [ ] **TASK-010**: P/L表示テーブルの作成
  - 月次/年次切り替え
  - 前期比較表示
  - 構成比率表示

### 2.2 貸借対照表 (B/S)
- [ ] **TASK-011**: B/S入力フォームの作成
  - 資産（流動・固定）入力
  - 負債（流動・固定）入力
  - 純資産入力

- [ ] **TASK-012**: B/S計算ロジックの実装
  - 資産合計の計算
  - 負債合計の計算
  - 純資産合計の計算
  - バランスチェック（資産 = 負債 + 純資産）

- [ ] **TASK-013**: B/S表示テーブルの作成
  - 勘定式 or 報告式の選択
  - 前期比較表示

### 2.3 キャッシュフロー計算書 (C/F)
- [ ] **TASK-014**: C/F入力フォームの作成
  - 営業CF調整項目
  - 投資CF項目
  - 財務CF項目

- [ ] **TASK-015**: C/F計算ロジックの実装
  - 営業CF（間接法）の計算
  - 投資CFの計算
  - 財務CFの計算
  - 期末現金残高の計算

- [ ] **TASK-016**: C/F表示テーブルの作成
  - 3区分の明細表示
  - 期首・期末残高の表示

### 2.4 財務三表の連携
- [ ] **TASK-017**: P/L → B/Sの連携
  - 当期純利益 → 利益剰余金への反映

- [ ] **TASK-018**: B/S → C/Fの連携
  - 現金残高の同期
  - 各科目増減のCF反映

---

## Phase 3: 分析・可視化機能

### 3.1 財務比率分析
- [ ] **TASK-019**: 収益性指標の実装
  - 売上総利益率
  - 営業利益率
  - 経常利益率
  - 当期純利益率

- [ ] **TASK-020**: 効率性指標の実装
  - ROE（自己資本利益率）
  - ROA（総資産利益率）
  - 総資産回転率

- [ ] **TASK-021**: 安全性指標の実装
  - 流動比率
  - 当座比率
  - 自己資本比率
  - 負債比率

- [ ] **TASK-022**: 財務分析ダッシュボードの作成
  - KPIカード表示
  - 指標の良否判定（色分け）
  - 業界平均との比較（将来機能）

### 3.2 グラフ・チャート
- [ ] **TASK-023**: Chart.jsの導入と基本設定
  - ライブラリの読み込み
  - 共通設定（色、フォント等）
  - レスポンシブ対応

- [ ] **TASK-024**: 売上・利益推移グラフ
  - 折れ線グラフ
  - 月次/年次切り替え
  - 複数指標の重ね表示

- [ ] **TASK-025**: 費用構成グラフ
  - 円グラフ（費用内訳）
  - 積み上げ棒グラフ（月次推移）

- [ ] **TASK-026**: B/S構成グラフ
  - 積み上げ棒グラフ（資産・負債・純資産）
  - 左右対称表示

- [ ] **TASK-027**: C/Fウォーターフォールチャート
  - 期首残高から期末残高への変化表示

---

## Phase 4: 予測・シミュレーション

### 4.1 基本予測機能
- [ ] **TASK-028**: 成長率ベース予測の実装
  - 売上成長率の設定
  - 費用比率の設定
  - 予測期間の設定（1〜5年）

- [ ] **TASK-029**: 予測P/Lの生成
  - 成長率に基づく売上予測
  - 費用比率に基づく費用予測
  - 予測利益の計算

- [ ] **TASK-030**: 予測B/S・C/Fの生成
  - P/L連動でのB/S予測
  - C/Fの自動生成

### 4.2 シナリオ分析
- [ ] **TASK-031**: シナリオ設定機能
  - 楽観シナリオの設定
  - 標準シナリオの設定
  - 悲観シナリオの設定

- [ ] **TASK-032**: シナリオ比較表示
  - 3シナリオの並列表示
  - グラフでの比較表示

---

## Phase 5: データ入出力

### 5.1 エクスポート機能
- [ ] **TASK-033**: CSVエクスポートの実装
  - P/L、B/S、C/F個別出力
  - 全データ一括出力
  - 文字コード選択（UTF-8/Shift-JIS）

- [ ] **TASK-034**: JSONエクスポートの実装
  - 全データのバックアップ用

### 5.2 インポート機能
- [ ] **TASK-035**: CSVインポートの実装
  - テンプレートのダウンロード
  - ファイル選択・読み込み
  - データ検証・エラー表示

- [ ] **TASK-036**: JSONインポートの実装
  - バックアップからの復元
  - バージョン互換性チェック

---

## Phase 6: UI/UX改善

### 6.1 ダッシュボード
- [ ] **TASK-037**: ダッシュボード画面の作成
  - 主要KPIの一覧表示
  - ミニグラフの表示
  - クイックアクションボタン

### 6.2 ユーザビリティ
- [ ] **TASK-038**: キーボードショートカットの実装
  - 保存: Ctrl+S
  - ページ切り替え: Ctrl+1〜6
  - ヘルプ: F1

- [ ] **TASK-039**: 入力補助機能
  - 数値フォーマット（カンマ区切り）
  - 計算機能（+, -, *, /）
  - 前期コピー機能

- [ ] **TASK-040**: ツールチップ・ヘルプの追加
  - 用語説明
  - 入力ガイド
  - 計算式の表示

### 6.3 設定画面
- [ ] **TASK-041**: 設定画面の作成
  - 会社情報設定
  - 会計期間設定
  - 表示設定（通貨、小数点等）
  - データ管理（リセット、バックアップ）

---

## Phase 7: テスト・ドキュメント

### 7.1 テスト
- [ ] **TASK-042**: ユニットテストの作成
  - 計算ロジックのテスト
  - データモデルのテスト

- [ ] **TASK-043**: 統合テストの作成
  - 画面遷移テスト
  - データ保存・読込テスト

- [ ] **TASK-044**: ブラウザ互換性テスト
  - Chrome, Firefox, Safari, Edgeでの動作確認

### 7.2 ドキュメント
- [ ] **TASK-045**: ユーザーマニュアルの作成
  - 基本操作ガイド
  - 各画面の説明
  - FAQ

- [ ] **TASK-046**: 開発者ドキュメントの作成
  - アーキテクチャ説明
  - API（関数）リファレンス
  - 拡張ガイド

---

## タスク優先度マトリクス

| 優先度 | タスク番号 | 備考 |
|--------|-----------|------|
| **最高** | 001-007 | 基盤なしでは何も作れない |
| **高** | 008-018 | コア機能（財務三表） |
| **中** | 019-027, 037 | 分析・可視化 |
| **低** | 028-036 | 予測機能 |
| **任意** | 038-046 | 品質向上 |

---

## 依存関係図

```
TASK-001 ─┬─> TASK-002 ─> TASK-003 ─> TASK-004
          │
          └─> TASK-005 ─> TASK-006 ─> TASK-007
                │
                ├─> TASK-008 ─> TASK-009 ─> TASK-010 ─┐
                │                                      │
                ├─> TASK-011 ─> TASK-012 ─> TASK-013 ─┼─> TASK-017 ─> TASK-018
                │                                      │
                └─> TASK-014 ─> TASK-015 ─> TASK-016 ─┘
                                                       │
                                                       v
                    TASK-023 ─> TASK-024/025/026/027
                                                       │
                    TASK-019/020/021 ─> TASK-022 <─────┘
                                           │
                                           v
                    TASK-028 ─> TASK-029 ─> TASK-030 ─> TASK-031 ─> TASK-032
```

---

## 見積もり工数（参考）

| Phase | タスク数 | 複雑度 |
|-------|---------|--------|
| Phase 1 | 7 | 中 |
| Phase 2 | 11 | 高 |
| Phase 3 | 9 | 中 |
| Phase 4 | 5 | 中 |
| Phase 5 | 4 | 低 |
| Phase 6 | 5 | 低 |
| Phase 7 | 5 | 低 |
| **合計** | **46** | - |

---

## セッション別タスクアサイン（並行開発用）

複数セッションで同時並行開発するためのアサイン表です。
依存関係を考慮し、Wave（段階）ごとに実行します。

### 開発Wave概要

```
┌─────────────────────────────────────────────────────────────────────────┐
│  Wave 1: 基盤構築                                                        │
│  ┌──────────────────┐  ┌──────────────────┐                             │
│  │ Session A        │  │ Session B        │                             │
│  │ UI基盤           │  │ データ基盤       │  ← 並行実行可能              │
│  └────────┬─────────┘  └────────┬─────────┘                             │
│           │                     │                                        │
│           └──────────┬──────────┘                                        │
│                      ▼                                                   │
├─────────────────────────────────────────────────────────────────────────┤
│  Wave 2: 財務三表                                                        │
│  ┌────────────┐  ┌────────────┐  ┌────────────┐                         │
│  │ Session C  │  │ Session D  │  │ Session E  │  ← 3並行実行可能        │
│  │ P/L        │  │ B/S        │  │ C/F        │                         │
│  └─────┬──────┘  └─────┬──────┘  └─────┬──────┘                         │
│        └───────────────┼───────────────┘                                │
│                        ▼                                                 │
├─────────────────────────────────────────────────────────────────────────┤
│  Wave 3: 拡張機能                                                        │
│  ┌────────────┐  ┌────────────┐  ┌────────────┐  ┌────────────┐         │
│  │ Session A  │  │ Session B  │  │ Session C  │  │ Session D  │         │
│  │ 連携+UI/UX │  │ データI/O  │  │ 分析       │  │ グラフ     │         │
│  └────────────┘  └────────────┘  └────────────┘  └────────────┘         │
│                        ↓                                                 │
├─────────────────────────────────────────────────────────────────────────┤
│  Wave 4: 予測・テスト                                                    │
│  ┌────────────────────┐  ┌────────────────────┐                         │
│  │ Session E          │  │ Session Any        │                         │
│  │ 予測・シミュレーション │  │ テスト・ドキュメント │                         │
│  └────────────────────┘  └────────────────────┘                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

### Session A: UI基盤担当

**担当領域**: プロジェクト構造、HTML/CSS、UI/UX改善

| Wave | タスク | 内容 | 依存 |
|------|--------|------|------|
| 1 | **TASK-001** | プロジェクト構造の作成 | なし |
| 1 | **TASK-002** | 基本HTMLテンプレートの作成 | 001 |
| 1 | **TASK-003** | CSSフレームワークの構築 | 002 |
| 1 | **TASK-004** | JavaScriptモジュール構造の設計 | 003 |
| 3 | **TASK-017** | P/L → B/Sの連携 | Wave 2完了 |
| 3 | **TASK-018** | B/S → C/Fの連携 | 017 |
| 3 | **TASK-037** | ダッシュボード画面の作成 | Wave 2完了 |
| 3 | **TASK-038** | キーボードショートカットの実装 | 037 |
| 3 | **TASK-039** | 入力補助機能 | 004 |
| 3 | **TASK-040** | ツールチップ・ヘルプの追加 | 037 |
| 3 | **TASK-041** | 設定画面の作成 | 004 |

**合計**: 11タスク

---

### Session B: データ基盤担当

**担当領域**: データモデル、ストレージ、データ入出力

| Wave | タスク | 内容 | 依存 |
|------|--------|------|------|
| 1 | **TASK-005** | データモデルの実装 | 001 |
| 1 | **TASK-006** | LocalStorageマネージャーの実装 | 005 |
| 1 | **TASK-007** | 状態管理の実装 | 006 |
| 3 | **TASK-033** | CSVエクスポートの実装 | 007 |
| 3 | **TASK-034** | JSONエクスポートの実装 | 007 |
| 3 | **TASK-035** | CSVインポートの実装 | 033 |
| 3 | **TASK-036** | JSONインポートの実装 | 034 |

**合計**: 7タスク

---

### Session C: P/L + 財務分析担当

**担当領域**: 損益計算書、財務比率分析

| Wave | タスク | 内容 | 依存 |
|------|--------|------|------|
| 2 | **TASK-008** | P/L入力フォームの作成 | Wave 1完了 |
| 2 | **TASK-009** | P/L計算ロジックの実装 | 008 |
| 2 | **TASK-010** | P/L表示テーブルの作成 | 009 |
| 3 | **TASK-019** | 収益性指標の実装 | 010 |
| 3 | **TASK-020** | 効率性指標の実装 | 010, 013 |
| 3 | **TASK-021** | 安全性指標の実装 | 013 |
| 3 | **TASK-022** | 財務分析ダッシュボードの作成 | 019-021 |

**合計**: 7タスク

---

### Session D: B/S + グラフ担当

**担当領域**: 貸借対照表、グラフ・チャート

| Wave | タスク | 内容 | 依存 |
|------|--------|------|------|
| 2 | **TASK-011** | B/S入力フォームの作成 | Wave 1完了 |
| 2 | **TASK-012** | B/S計算ロジックの実装 | 011 |
| 2 | **TASK-013** | B/S表示テーブルの作成 | 012 |
| 3 | **TASK-023** | Chart.jsの導入と基本設定 | Wave 1完了 |
| 3 | **TASK-024** | 売上・利益推移グラフ | 023, 010 |
| 3 | **TASK-025** | 費用構成グラフ | 023, 010 |
| 3 | **TASK-026** | B/S構成グラフ | 023, 013 |
| 3 | **TASK-027** | C/Fウォーターフォールチャート | 023, 016 |

**合計**: 8タスク

---

### Session E: C/F + 予測担当

**担当領域**: キャッシュフロー計算書、予測・シミュレーション

| Wave | タスク | 内容 | 依存 |
|------|--------|------|------|
| 2 | **TASK-014** | C/F入力フォームの作成 | Wave 1完了 |
| 2 | **TASK-015** | C/F計算ロジックの実装 | 014 |
| 2 | **TASK-016** | C/F表示テーブルの作成 | 015 |
| 4 | **TASK-028** | 成長率ベース予測の実装 | Wave 3完了 |
| 4 | **TASK-029** | 予測P/Lの生成 | 028 |
| 4 | **TASK-030** | 予測B/S・C/Fの生成 | 029 |
| 4 | **TASK-031** | シナリオ設定機能 | 028 |
| 4 | **TASK-032** | シナリオ比較表示 | 031 |

**合計**: 8タスク

---

### Session F: テスト・ドキュメント担当（任意）

**担当領域**: テスト作成、ドキュメント整備

| Wave | タスク | 内容 | 依存 |
|------|--------|------|------|
| 4 | **TASK-042** | ユニットテストの作成 | Wave 3完了 |
| 4 | **TASK-043** | 統合テストの作成 | 042 |
| 4 | **TASK-044** | ブラウザ互換性テスト | 043 |
| 4 | **TASK-045** | ユーザーマニュアルの作成 | Wave 3完了 |
| 4 | **TASK-046** | 開発者ドキュメントの作成 | Wave 3完了 |

**合計**: 5タスク

---

### セッション別サマリー

| Session | 担当領域 | タスク数 | Wave |
|---------|----------|----------|------|
| **A** | UI基盤 + 連携 + UI/UX | 11 | 1, 3 |
| **B** | データ基盤 + 入出力 | 7 | 1, 3 |
| **C** | P/L + 財務分析 | 7 | 2, 3 |
| **D** | B/S + グラフ | 8 | 2, 3 |
| **E** | C/F + 予測 | 8 | 2, 4 |
| **F** | テスト・ドキュメント | 5 | 4 |
| **合計** | - | **46** | - |

---

### 並行開発のルール

1. **Wave 1 完了が前提**
   - Session A と Session B が Wave 1 を完了するまで、他のセッションは待機
   - Wave 1 完了後、Session C/D/E は同時に開始可能

2. **ファイル競合の回避**
   - 各セッションは担当ファイルのみを編集
   - 共通ファイル（app.js, index.html等）の編集は Session A が担当
   - 競合が発生した場合は Session A がマージ

3. **インターフェース定義**
   - Session B がデータモデルのインターフェースを先に定義
   - 他のセッションはそのインターフェースに従う

4. **コミュニケーション**
   - 各 Wave 完了時に進捗を共有
   - ブロッカーがある場合は即座に報告

---

### ファイル担当マッピング

| Session | 担当ファイル/ディレクトリ |
|---------|---------------------------|
| **A** | `index.html`, `src/css/*`, `src/js/app.js`, `src/js/router.js`, `src/js/views/dashboard.js`, `src/js/views/settings.js` |
| **B** | `src/js/models/*`, `src/js/utils/storage.js`, `src/js/utils/state.js`, `src/js/utils/csv.js`, `src/js/utils/json.js` |
| **C** | `src/js/views/pl.js`, `src/js/utils/pl-calc.js`, `src/js/views/analysis.js`, `src/js/utils/ratios.js` |
| **D** | `src/js/views/bs.js`, `src/js/utils/bs-calc.js`, `src/js/views/charts.js`, `src/js/utils/chart-config.js` |
| **E** | `src/js/views/cf.js`, `src/js/utils/cf-calc.js`, `src/js/views/forecast.js`, `src/js/utils/forecast.js` |
| **F** | `tests/*`, `docs/*` |

---

### クイックスタートガイド

#### Session A を開始する場合
```
Wave 1 から開始:
1. TASK-001: プロジェクト構造を作成
2. TASK-002: index.html のテンプレート作成
3. TASK-003: CSS変数・共通スタイル作成
4. TASK-004: app.js, router.js の基盤作成
```

#### Session B を開始する場合
```
Wave 1 から開始（TASK-001 完了待ち）:
1. TASK-005: src/js/models/ にデータモデル作成
2. TASK-006: storage.js でLocalStorage管理
3. TASK-007: state.js で状態管理
```

#### Session C/D/E を開始する場合
```
Wave 1 完了を確認してから:
1. git pull で最新を取得
2. 担当のWave 2 タスクから開始
```

---

## 次のアクション

1. **Session A** と **Session B** を同時に開始（Wave 1）
2. Wave 1 完了後、**Session C/D/E** を同時に開始（Wave 2）
3. Wave 2 完了後、各セッションが Wave 3/4 のタスクを継続

---

**作成日**: 2026-01-08
**バージョン**: 1.1
**更新内容**: セッション別タスクアサインを追加
