# 財務モデリングシステム 要件定義書

## 1. プロジェクト概要

### 1.1 目的
スタートアップや中小企業が簡単に財務計画を作成・管理できるWebベースの財務モデリングシステムを構築する。

### 1.2 ターゲットユーザー
- スタートアップの創業者・経営者
- 中小企業の財務担当者
- 個人事業主
- 投資家（事業計画の評価用）

### 1.3 解決する課題
- Excelベースの財務モデルは複雑で管理が困難
- 財務三表の連携が手動で煩雑
- 将来予測のシミュレーションが難しい
- 財務データの可視化に時間がかかる

---

## 2. 機能要件

### 2.1 コア機能

#### 2.1.1 損益計算書 (P/L: Profit & Loss)
| 機能 | 説明 | 優先度 |
|------|------|--------|
| 売上高入力 | 月次/年次の売上高を入力 | 高 |
| 売上原価入力 | 原価率または金額で入力 | 高 |
| 販管費入力 | カテゴリ別に経費を入力 | 高 |
| 営業利益計算 | 自動計算 | 高 |
| 経常利益計算 | 営業外収益・費用を加味 | 中 |
| 当期純利益計算 | 税金を加味して計算 | 中 |

#### 2.1.2 貸借対照表 (B/S: Balance Sheet)
| 機能 | 説明 | 優先度 |
|------|------|--------|
| 流動資産管理 | 現金、売掛金、在庫等 | 高 |
| 固定資産管理 | 設備、建物等 | 中 |
| 流動負債管理 | 買掛金、短期借入金等 | 高 |
| 固定負債管理 | 長期借入金等 | 中 |
| 純資産管理 | 資本金、利益剰余金 | 高 |

#### 2.1.3 キャッシュフロー計算書 (C/F: Cash Flow)
| 機能 | 説明 | 優先度 |
|------|------|--------|
| 営業CF | P/Lから自動連携 | 高 |
| 投資CF | 設備投資等の入力 | 中 |
| 財務CF | 借入・返済の入力 | 中 |
| 期末現金残高 | 自動計算 | 高 |

### 2.2 分析機能

#### 2.2.1 財務比率分析
| 指標 | 計算式 | 優先度 |
|------|--------|--------|
| 売上総利益率 | (売上高-売上原価)/売上高 | 高 |
| 営業利益率 | 営業利益/売上高 | 高 |
| ROE | 当期純利益/純資産 | 高 |
| ROA | 当期純利益/総資産 | 高 |
| 流動比率 | 流動資産/流動負債 | 中 |
| 自己資本比率 | 純資産/総資産 | 中 |

#### 2.2.2 予測・シミュレーション
| 機能 | 説明 | 優先度 |
|------|------|--------|
| 成長率ベース予測 | 売上成長率を設定して予測 | 高 |
| シナリオ分析 | 楽観/標準/悲観の3パターン | 中 |
| 感度分析 | 変数変更による影響分析 | 低 |

### 2.3 可視化機能

| 機能 | 説明 | 優先度 |
|------|------|--------|
| 売上・利益推移グラフ | 折れ線グラフ | 高 |
| 費用構成グラフ | 円グラフ/棒グラフ | 高 |
| 財務比率ダッシュボード | ゲージ/KPIカード | 中 |
| B/S構成グラフ | 積み上げ棒グラフ | 中 |

### 2.4 データ管理機能

| 機能 | 説明 | 優先度 |
|------|------|--------|
| ローカルストレージ保存 | ブラウザにデータ保存 | 高 |
| CSVエクスポート | データをCSV出力 | 高 |
| CSVインポート | CSVからデータ取込 | 中 |
| PDFレポート出力 | 財務諸表をPDF化 | 低 |

---

## 3. 非機能要件

### 3.1 技術スタック
| 項目 | 技術 | 理由 |
|------|------|------|
| フロントエンド | HTML5 / CSS3 / JavaScript (ES6+) | シンプル、依存関係なし |
| UIフレームワーク | なし（Vanilla CSS） | 軽量化 |
| グラフライブラリ | Chart.js | 軽量、高機能 |
| データ保存 | LocalStorage | サーバー不要 |

### 3.2 ブラウザ対応
- Chrome (最新版)
- Firefox (最新版)
- Safari (最新版)
- Edge (最新版)

### 3.3 パフォーマンス
- 初期ロード: 3秒以内
- 計算処理: 1秒以内
- グラフ描画: 0.5秒以内

### 3.4 セキュリティ
- データはクライアントサイドのみで処理
- 外部通信なし（完全オフライン対応）

---

## 4. 画面構成

```
┌─────────────────────────────────────────────────────────────┐
│  ヘッダー: ロゴ / ナビゲーション / 保存・読込ボタン          │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────┐  ┌─────────────────────────────────────┐  │
│  │             │  │                                     │  │
│  │  サイドバー  │  │         メインコンテンツ            │  │
│  │             │  │                                     │  │
│  │  - ダッシュ  │  │  [入力フォーム / テーブル /         │  │
│  │    ボード    │  │   グラフエリア]                     │  │
│  │  - P/L      │  │                                     │  │
│  │  - B/S      │  │                                     │  │
│  │  - C/F      │  │                                     │  │
│  │  - 分析     │  │                                     │  │
│  │  - 予測     │  │                                     │  │
│  │  - 設定     │  │                                     │  │
│  │             │  │                                     │  │
│  └─────────────┘  └─────────────────────────────────────┘  │
│                                                             │
├─────────────────────────────────────────────────────────────┤
│  フッター: バージョン情報 / エクスポートボタン               │
└─────────────────────────────────────────────────────────────┘
```

### 4.1 画面一覧
1. **ダッシュボード** - 主要KPIとグラフの一覧表示
2. **損益計算書** - P/Lの入力・表示画面
3. **貸借対照表** - B/Sの入力・表示画面
4. **キャッシュフロー** - C/Fの入力・表示画面
5. **財務分析** - 各種財務比率の表示
6. **予測シミュレーション** - 将来予測の設定・表示
7. **設定** - 会計期間、通貨単位等の設定

---

## 5. データ構造

### 5.1 基本データモデル
```javascript
{
  "company": {
    "name": "会社名",
    "fiscalYearStart": "04",  // 決算期開始月
    "currency": "JPY"
  },
  "periods": [
    {
      "year": 2024,
      "month": 1,
      "pl": {
        "revenue": 0,           // 売上高
        "cogs": 0,              // 売上原価
        "sgaExpenses": {        // 販管費
          "personnel": 0,       // 人件費
          "rent": 0,            // 賃料
          "utilities": 0,       // 光熱費
          "marketing": 0,       // 広告宣伝費
          "other": 0            // その他
        },
        "nonOperating": {
          "income": 0,          // 営業外収益
          "expense": 0          // 営業外費用
        },
        "tax": 0                // 法人税等
      },
      "bs": {
        "assets": {
          "current": {
            "cash": 0,          // 現金預金
            "receivables": 0,   // 売掛金
            "inventory": 0      // 棚卸資産
          },
          "fixed": {
            "tangible": 0,      // 有形固定資産
            "intangible": 0     // 無形固定資産
          }
        },
        "liabilities": {
          "current": {
            "payables": 0,      // 買掛金
            "shortTermDebt": 0  // 短期借入金
          },
          "fixed": {
            "longTermDebt": 0   // 長期借入金
          }
        },
        "equity": {
          "capital": 0,         // 資本金
          "retainedEarnings": 0 // 利益剰余金
        }
      }
    }
  ],
  "forecast": {
    "revenueGrowthRate": 0.1,  // 売上成長率
    "scenarios": {
      "optimistic": { "growthRate": 0.2 },
      "standard": { "growthRate": 0.1 },
      "pessimistic": { "growthRate": 0.0 }
    }
  }
}
```

---

## 6. 制約事項・前提条件

### 6.1 制約事項
- サーバーサイド処理なし（フロントエンドのみ）
- ユーザー認証機能なし
- 複数ユーザーでのデータ共有不可
- ブラウザのLocalStorageに依存（約5MB制限）

### 6.2 前提条件
- モダンブラウザの使用を前提
- JavaScriptが有効化されていること
- インターネット接続は初回ロードのみ必要（CDN使用時）

---

## 7. 今後の拡張計画（Phase 2以降）

- [ ] バックエンド連携（データベース保存）
- [ ] ユーザー認証・マルチユーザー対応
- [ ] チーム共有機能
- [ ] API連携（会計ソフト、銀行API等）
- [ ] AI による予測精度向上
- [ ] モバイルアプリ対応

---

## 8. 用語集

| 用語 | 説明 |
|------|------|
| P/L | Profit and Loss Statement（損益計算書） |
| B/S | Balance Sheet（貸借対照表） |
| C/F | Cash Flow Statement（キャッシュフロー計算書） |
| ROE | Return on Equity（自己資本利益率） |
| ROA | Return on Assets（総資産利益率） |
| COGS | Cost of Goods Sold（売上原価） |
| SGA | Selling, General and Administrative（販売費及び一般管理費） |

---

**作成日**: 2026-01-08
**バージョン**: 1.0
